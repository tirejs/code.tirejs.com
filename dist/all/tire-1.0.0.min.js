/*!
 * tire.js
 * Copyright (c) 2012 Fredrik Forsmo
 * Version: 1.0.0
 * Released under the MIT License.
 */
(function(a,b){function m(a,b){var d="";return c.defaultView&&c.defaultView.getComputedStyle?(b=b.replace(/([A-Z])/g,"-$1").toLowerCase(),d=c.defaultView.getComputedStyle(a,"").getPropertyValue(b)):a.currentStyle?d=a.currentStyle[b]:d=a.style[b],d?d:""}function o(a){var b=c.createElement("div");return l.isStr(a)?b.innerHTML=a:b.appendChild(a),b}function r(a){return a._eventId||(a._eventId=p++)}function s(a,b){return q[a]=q[a]||{},q[a][b]=q[a][b]||[]}function t(a,b,c){var d=r(a),e=s(d,b),f=function(b){c.call(a,b)===!1&&(b.preventDefault(),b.stopPropagation())};return f.guid=c.guid=c.guid||++p,e.push(f),f}function u(a,b,c){var d=t(a,b,c);a.addEventListener?a.addEventListener(b,d,!1):a.attachEvent&&a.attachEvent("on"+b,d)}function v(a,b,c){var d=r(a),e=s(d,b);for(var f=0;f<e.length;f++)if(c===undefined||c.guid===e[f].guid){if(a.removeEventListener)a.removeEventListener(b,e[f],!1);else if(a.detachEvent){var g="on"+b;l.isStr(a[g])&&(a[g]=null),a.detachEvent(g,e[f])}q[d][b].remove(f,1)}delete q[d]}function w(a,b){l.each(a.split(" "),function(a){b(a)})}function x(b,d){var e=(e=/callback\=([A-Za-z0-9\-\.]+)/.exec(b))?e[1]:"jsonp"+ +(new Date),f=c.createElement("script");f.onerror=function(){l(f).remove();try{delete a[e]}catch(b){a[e]=undefined}l.isFun(d.error)&&d.error("abort")},a[e]=function(b){l(f).remove();try{delete a[e]}catch(c){a[e]=undefined}y(b,null,d)},d.data=l.param(d.data),f.src=b.replace(/\=\?/,"="+e),l("head")[0].appendChild(f)}function y(a,b,c){var d;b&&((c.dataType==="json"||!1)&&(d=l.parseJSON(b.responseText))===null&&(d=b.responseText),c.dataType==="xml"&&(d=b.responseXML),d=d||b.responseText),!d&&a&&(d=a),l.isFun(c.success)&&c.success(d)}var c=a.document,d=a.tire,e=a.$,f=/^#/,g=/^#?([\w-]+)$/,h=/^\./,i=/<([\w:]+)/,j=[].slice;Array.prototype.remove=function(a,b){var c=this.slice((b||a)+1||this.length);return this.length=a<0?this.length+a:a,this.push.apply(this,c)};try{j.call(c.documentElement.childNodes,0)[0].nodeType}catch(k){j=function(a){a=a||0;var b,c=[];for(;b=this[a];a++)c.push(b);return c}}var l=function(a,b){return new l.fn.find(a,b)};l.fn=l.prototype={length:0,extend:function(a){for(var b in a)this[b]=a[b]},find:function(b,d){var e=[];if(!b)return this;l.isFun(b)&&l.ready(b);if(b.nodeType)return this.selector="",this.context=b,this.set([b]);if(b.length===1&&b[0].nodeType)return this.selector=b.selector,this.context=b[0],this.set(b);this.context=d=d||c;if(l.isStr(b)){this.selector=b;if(g.test(b))e=j.call(f.test(b)?[c.getElementById(b.substr(1))]:c.getElementsByTagName(b),0),e[0]===null&&(e=[]);else if(h.test(b)&&c.getElementsByClassName!==undefined)e=j.call(c.getElementsByClassName(b.substr(1)),0),e[0]===null&&(e=[]);else if(i.test(b)){var k=c.createElement("div");k.innerHTML=b,this.each.call(j.call(k.childNodes,0),function(){e.push(this)})}else e=c.querySelectorAll(b)}else b.nodeName||b===a?e=[b]:l.isArr(b)&&(e=b);return this.set(e)},pluck:function(a){var b=[];return this.each(function(){this[a]&&b.push(this[a])}),b},each:function(a,b){var c,d;l.isFun(a)&&(b=a,a=this);if(a===this||l.isArr(a)){for(c=0;c<a.length;++c)if(b.call(a[c],a[c],c,a)===!1)break}else for(d in a)if(a.hasOwnProperty(d)&&b.call(a[d],d,a[d])===!1)break;return a},set:function(a){var b=0;for(;b<a.length;b++)this[b]=a[b];return this.length=b,this}},l.extend=function(){var a,b=1,c=arguments[0]||{};typeof c!="object"&&typeof c!="function"&&(c={}),arguments.length===1&&(c=this,b=0);for(;b<arguments.length;b++)if((a=arguments[b])!==null)for(var d in a){if(c[d]===a[d])continue;c[d]=a[d]}return c},l.fn.find.prototype=l.fn,l.extend({slice:j,each:l.fn.each,trim:function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},matches:function(a,b){if(!a||a.nodeType!==1)return!1;var d=a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.matchesSelector;if(d)return d.call(a,b);if(c.querySelectorAll!==undefined){var e=a.parentNode.querySelectorAll(b);for(var f=0;f<e.length;f++)if(e[f]===a)return!0}return!1},isFun:function(a){return typeof a=="function"},isArr:function(a){return a instanceof Array},isStr:function(a){return typeof a=="string"},isNum:function(a){return typeof a=="number"},isObj:function(a){return a instanceof Object&&!this.isArr(a)&&!this.isFun(a)},parseJSON:function(b){if(!this.isStr(b)||!b)return null;b=this.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);try{return(new Function("return "+b))()}catch(c){return null}},noConflict:function(b){return b&&(a.tire=d),a.$=e,l}}),l.fn.extend({addClass:function(a){if(a&&l.isStr(a))return this.each(function(b){if(b.nodeType===1){var c=a.split(/\s+/);if(!b.className&&c.length===1)b.className=a;else{var d=b.className;for(var e=0;e<c.length;e++)d.indexOf(c[e])===-1&&(d+=" "+c[e]);b.className=l.trim(d)}}})},removeClass:function(a){return this.each(function(b){if(a&&l.isStr(a)){var c=a.split(/\s+/);if(b.nodeType===1&&b.className){if(c.length===1)b.className=b.className.replace(a,"");else for(var d=0;d<c.length;d++)b.className=b.className.replace(c[d],"");b.className=l.trim(b.className.replace(/\s{2}/g," ")),b.className===""&&b.removeAttribute("class")}}})},hasClass:function(a){var b=(this[0]?this[0]:this).className.split(/\s+/),c=a.split(/\s+/),d=0;if(c.length>1){var e=!1;for(d=0;d<c.length;d++)e=this.hasClass.call(this,c[d]);return e}if(l.isStr(a)){for(d=0;d<b.length;d++)if(b[d]===a)return!0;return!1}},attr:function(a,b){if(b&&l.isStr(b))return this.each(function(){this.setAttribute(a,b)});if(l.isStr(a)){var c;for(var d=0;d<this.length;d++){if((c=this[d].getAttribute(a))!==null)break;continue}return c}},removeAttr:function(a){return this.each(function(){if(a&&this.nodeType===1){var b=a.split(/\s+/);for(var c=0;c<b.length;c++)this.removeAttribute(b[c])}})}}),l.fn.extend({css:function(a,b){return l.isStr(a)&&b===undefined?this.length>0?m(this[0],a):undefined:this.each(function(){if(l.isStr(a))this.style[a]=b;else for(var c in a)this.style[c]=a[c]})},hide:function(){return this.css("display","none")},show:function(){return this.css("display","")}});var n=function(){function h(){b?c.removeEventListener("DOMContentLoaded",h,!1):c.readyState==="complete"&&c.detachEvent("onreadystatechange",h),j()}function i(){if(d)return;try{f.doScroll("left")}catch(a){setTimeout(i,10)}j()}function j(){if(d)return;d=!0;for(var a=0;a<g.length;a++)g[a].call(c)}var b=!!c.addEventListener,d=!1,e=!1,f=c.documentElement,g=[];return b?(c.addEventListener("DOMContentLoaded",h,!0),a.addEventListener("load",j,!1)):(c.attachEvent("onreadystatechange",h),a.attachEvent("onload",j),f.doScroll&&a===a.top&&i()),function(a){return d?a.call(c):g.push(a)}}();l.ready=l.fn.ready=n,l.fn.extend({is:function(a){return this.length>0&&l.matches(this[0],a)},closest:function(a,b){var c=this[0];while(c&&!l.matches(c,a)){c=c.parentNode;if(!c||!c.ownerDocument||c===b||c.nodeType===11)break}return l(c)},parent:function(a){var b=this.pluck("parentNode");return a===undefined?l(b):l(b).filter(a)},children:function(a){var b=[];return this.each(function(){l.each(l.slice.call(this.children,0),function(a){b.push(a)})}),a===undefined?l(b):l(b).filter(a)},text:function(a){return a===undefined?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=a})},val:function(a){return a===undefined?this.length>0?this[0].multiple?this.find("option").filter(function(){return this.selected}).pluck("value"):this[0].value:null:this.each(function(){this.value=a})},empty:function(){return this.each(function(){this.innerHTML=""})},html:function(a,b){return arguments.length===0?this.length>0?this[0].innerHTML:null:(b=b||"inner",a instanceof l&&(a=a[0]),this.each(function(){if(b==="inner")l.isStr(a)||l.isNum(a)?this.innerHTML=a:(this.innerHTML="",this.appendChild(a));else if(b==="remove")this.parentNode.removeChild(this);else{var c=o(a),d=c.childNodes,e;b==="prepend"?this.insertBefore(c,this.firstChild):b==="append"?this.insertBefore(c,null):b==="before"?this.parentNode.insertBefore(c,this):b==="after"&&this.parentNode.insertBefore(c,this.nextElementSibling?this.nextElementSibling:this.nextSibling),e=c.parentNode;while(d.length)e.insertBefore(d[0],c);e.removeChild(c)}}))}}),l.each(["prepend","append","before","after","remove"],function(a){l.fn[a]=function(a){return function(b){return this.html(b,a)}}(a)}),l.fn.extend({filter:function(a){if(l.isFun(a)){var b=[];return this.each(function(c,d){a.call(c,d)&&b.push(c)}),l(b)}return this.filter(function(){return l.matches(this,a)})},not:function(a){return this.filter(function(){return!l.matches(this,a)})},eq:function(a){return a===-1?l(j.call(this,this.length-1)):l(j.call(this,a,a+1))}});var p=1,q={};l.events=l.events||{},l.fn.extend({on:function(a,b){return this.each(function(){var c=this;w(a,function(a){u(c,a,b)})})},off:function(a,b){return this.each(function(){var c=this;w(a,function(a){v(c,a,b)})})},trigger:function(a,b){return this.each(function(d){d===c&&!d.dispatchEvent&&(d=c.documentElement);var e,f=!!c.createEvent;f?(e=c.createEvent("HTMLEvents"),e.initEvent(a,!0,!0)):(e=c.createEventObject(),e.cancelBubble=!0),e.data=b||{},e.eventName=a;if(f)d.dispatchEvent(e);else try{d.fireEvent("on"+a,e)}catch(g){d.attachEvent("onpropertychange",function(b){if(b.eventName===a&&b.srcElement._eventId){var c=s(b.srcElement._eventId,b.eventName);if(c.length)for(var d=0;d<c.length;d++)c[d](b)}}),d.fireEvent("onpropertychange",e)}})}}),l.fn.extend({ajax:function(b,c){c=c||{},l.isObj(b)&&(l.isFun(c)&&(b.success=b.success||c),c=b,b=c.url),l.isFun(c)&&(c={success:c}),c.dataType=(c.dataType||"").toLowerCase();if(!b)return;var d=this,e=(c.type||"GET").toUpperCase(),f=c.data||null,g=c.dataType==="jsonp"||!1,h,i={html:"text/html",text:"text/plain",xml:"application/xml, text/xml",json:"application/json"};a.XMLHttpRequest?h=new XMLHttpRequest:a.ActiveXObject&&(h=new ActiveXObject("Microsoft.XMLHTTP"));for(var j in i)b.indexOf("."+j)!==-1&&!c.dataType&&(c.dataType=j);if(g||/\=\?|callback\=/.test(b))return/\=\?/.test(b)&&(b=(b+"&"+"callback=?").replace(/[&?]{1,2}/,"?")),x(b,c),this;if(h){h.queryString=f,h.open(e,b,!0),h.setRequestHeader("X-Requested-With","XMLHttpRequest"),(i=i[c.dataType])!==undefined&&(h.setRequestHeader("Accept",i),i.indexOf(",")!==-1&&(i=i.split(",")[0]),h.overrideMimeType&&h.overrideMimeType(i)),(c.contentType||c.data&&e!=="GET")&&h.setRequestHeader("Content-Type",c.contentType||"application/x-www-form-urlencoded");for(var k in c.headers)c.headers.hasOwnProperty(k)&&h.setRequestHeader(k,c.headers[k]);h.onreadystatechange=function(){h.readyState===4&&(h.status>=200&&h.status<300||h.status===304?c.success!==undefined&&y(null,h,c):c.error!==undefined&&c.error(h,c))},h.send(l.param(f))}return this}}),l.extend({ajax:l.fn.ajax,param:function(a,b){var c=[];return this.each(a,function(a,d){var e=b?b+"["+a+"]":a;c.push(l.isObj(d)?l.param(d,e):encodeURIComponent(e)+"="+encodeURIComponent(d))}),c.join("&").replace("%20","+")}}),a.$=a.tire=l,typeof define=="function"&&define.amd&&define("tire",[],function(){return l})})(window);